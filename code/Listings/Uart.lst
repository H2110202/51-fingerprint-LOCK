C51 COMPILER V9.54   UART                                                                  03/20/2024 16:17:55 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE UART
OBJECT MODULE PLACED IN .\Objects\Uart.obj
COMPILER INVOKED BY: D:\stm32\C51\BIN\C51.EXE Uart.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\Uart.l
                    -st) TABS(2) OBJECT(.\Objects\Uart.obj)

line level    source

   1          #include"uart.h"
   2          #include <REGX52.H>
   3          
   4          void Uart_Init(void)
   5          {
   6   1      //    SCON=0x50;   //UART方式1:8位UART;   REN=1:允许接收 
   7   1      //    PCON=0x00;   //SMOD=0:波特率不加倍 
   8   1      //    TMOD=0x21;   //T1方式2,用于UART波特率 
   9   1      //    TH1=0xFD; 
  10   1      //    TL1=0xFD;   //UART波特率设置:FDFD，9600;FFFF,57600
  11   1      //    TR1=1;   //允许T1计数 
  12   1      //    EA=1;
  13   1        PCON |= 0x80;   //SMOD=0:波特率不加倍
  14   1          SCON = 0x50;   //UART方式1:8位UART;   REN=1:允许接收
  15   1          TMOD &= 0x0f; 
  16   1          TMOD |= 0x20;   //T1方式2,用于UART波特率 
  17   1          TH1 = 0xFF; 
  18   1          TL1 = 0xFF;   //UART波特率设置:FDFD，9600;FFFF,57600
  19   1          TR1 = 1;   //允许T1计数 
  20   1          ET1 = 0;
  21   1        
  22   1        
  23   1      }
  24          
  25          
  26          void Uart_Send_Byte(unsigned char c)//UART Send a byte
  27          {
  28   1        SBUF = c;
  29   1        while(!TI);   //发送完为1 
  30   1        TI = 0;
  31   1      }
  32          
  33          unsigned char Uart_Receive_Byte()  //UART Receive a byteg
  34          { 
  35   1        unsigned char dat;
  36   1        while(!RI);  //接收完为1 
  37   1        RI = 0;
  38   1        dat = SBUF;
  39   1        return (dat);
  40   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     39    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
